    1. store_src_rg                   pos = src.rg
    2. init_lane_masks                CondMask = LoopMask = RetMask = true
    3. zero_slot_unmasked             kZero = 0
    4. copy_constant                  kTen = 0x41200000 (10.0)
    5. copy_slot_unmasked             $6 = pos(0)
    6. copy_constant                  $7 = colorGreen(1)
    7. max_float                      $6 = max($6, $7)
    8. copy_constant                  $7 = colorGreen(3)
    9. min_float                      $6 = min($6, $7)
   10. copy_constant                  $7 = 0x40A00000 (5.0)
   11. mul_float                      $6 *= $7
   12. copy_slot_unmasked             five = $6
   13. store_condition_mask           $25 = CondMask
   14. store_condition_mask           $45 = CondMask
   15. store_condition_mask           $55 = CondMask
   16. store_condition_mask           $35 = CondMask
   17. store_condition_mask           $81 = CondMask
   18. store_condition_mask           $65 = CondMask
   19. store_condition_mask           $20 = CondMask
   20. store_condition_mask           $75 = CondMask
   21. store_condition_mask           $14 = CondMask
   22. store_condition_mask           $0 = CondMask
   23. branch_if_no_active_lanes      branch_if_no_active_lanes +34 (#57)
   24. store_return_mask              $1 = RetMask
   25. copy_slot_unmasked             $2 = five
   26. copy_slot_unmasked             five = $2
   27. copy_slot_unmasked             $2 = kZero
   28. copy_slot_unmasked             i = $2
   29. store_loop_mask                $2 = LoopMask
   30. jump                           jump +16 (#46)
   31. zero_slot_unmasked             [for-loop continue mask 0] = 0
   32. store_condition_mask           $3 = CondMask
   33. copy_slot_unmasked             $4 = i
   34. copy_slot_unmasked             $5 = five
   35. cmpeq_float                    $4 = equal($4, $5)
   36. merge_condition_mask           CondMask = $3 & $4
   37. copy_slot_unmasked             $5 = i
   38. copy_slot_masked               [return_loop].result = Mask($5)
   39. mask_off_return_mask           RetMask &= ~(CondMask & LoopMask & RetMask)
   40. load_condition_mask            CondMask = $3
   41. reenable_loop_mask             LoopMask |= [for-loop continue mask 0]
   42. copy_slot_unmasked             $3 = i
   43. copy_constant                  $4 = 0x3F800000 (1.0)
   44. add_float                      $3 += $4
   45. copy_slot_masked               i = Mask($3)
   46. copy_slot_unmasked             $3 = i
   47. copy_constant                  $4 = 0x41200000 (10.0)
   48. cmplt_float                    $3 = lessThan($3, $4)
   49. merge_loop_mask                LoopMask &= $3
   50. stack_rewind
   51. branch_if_any_active_lanes     branch_if_any_active_lanes -20 (#31)
   52. load_loop_mask                 LoopMask = $2
   53. zero_slot_unmasked             $2 = 0
   54. copy_slot_masked               [return_loop].result = Mask($2)
   55. load_return_mask               RetMask = $1
   56. copy_slot_unmasked             $1 = [return_loop].result
   57. copy_constant                  $2 = 0x40A00000 (5.0)
   58. cmpeq_float                    $1 = equal($1, $2)
   59. zero_slot_unmasked             $15 = 0
   60. merge_condition_mask           CondMask = $0 & $1
   61. branch_if_no_active_lanes      branch_if_no_active_lanes +37 (#98)
   62. copy_slot_unmasked             $16 = five
   63. copy_slot_unmasked             five = $16
   64. zero_slot_unmasked             sum = 0
   65. zero_slot_unmasked             i = 0
   66. store_loop_mask                $16 = LoopMask
   67. jump                           jump +19 (#86)
   68. zero_slot_unmasked             [for-loop continue mask 1] = 0
   69. store_condition_mask           $17 = CondMask
   70. copy_slot_unmasked             $18 = i
   71. copy_slot_unmasked             $19 = five
   72. cmplt_float                    $18 = lessThan($18, $19)
   73. merge_condition_mask           CondMask = $17 & $18
   74. copy_constant                  $19 = 0xFFFFFFFF
   75. copy_slot_masked               [for-loop continue mask 1] = Mask($19)
   76. mask_off_loop_mask             LoopMask &= ~(CondMask & LoopMask & RetMask)
   77. load_condition_mask            CondMask = $17
   78. copy_2_slots_unmasked          $17..18 = sum(0..1)
   79. add_float                      $17 += $18
   80. copy_slot_masked               sum = Mask($17)
   81. reenable_loop_mask             LoopMask |= [for-loop continue mask 1]
   82. copy_slot_unmasked             $17 = i
   83. copy_constant                  $18 = 0x3F800000 (1.0)
   84. add_float                      $17 += $18
   85. copy_slot_masked               i = Mask($17)
   86. copy_slot_unmasked             $17 = i
   87. copy_slot_unmasked             $18 = kTen
   88. cmplt_float                    $17 = lessThan($17, $18)
   89. merge_loop_mask                LoopMask &= $17
   90. stack_rewind
   91. branch_if_any_active_lanes     branch_if_any_active_lanes -23 (#68)
   92. load_loop_mask                 LoopMask = $16
   93. copy_slot_unmasked             $16 = sum
   94. copy_slot_masked               [continue_loop].result = Mask($16)
   95. copy_constant                  $17 = 0x420C0000 (35.0)
   96. cmpeq_float                    $16 = equal($16, $17)
   97. copy_slot_masked               $15 = Mask($16)
   98. load_condition_mask            CondMask = $0
   99. zero_slot_unmasked             $76 = 0
  100. merge_condition_mask           CondMask = $14 & $15
  101. branch_if_no_active_lanes      branch_if_no_active_lanes +37 (#138)
  102. copy_slot_unmasked             $77 = five
  103. copy_slot_unmasked             five = $77
  104. zero_slot_unmasked             sum = 0
  105. copy_constant                  kOne = 0x3F800000 (1.0)
  106. zero_slot_unmasked             i = 0
  107. store_loop_mask                $77 = LoopMask
  108. jump                           jump +18 (#126)
  109. zero_slot_unmasked             [for-loop continue mask 2] = 0
  110. store_condition_mask           $78 = CondMask
  111. copy_slot_unmasked             $79 = five
  112. copy_slot_unmasked             $80 = i
  113. cmplt_float                    $79 = lessThan($79, $80)
  114. merge_condition_mask           CondMask = $78 & $79
  115. mask_off_loop_mask             LoopMask &= ~(CondMask & LoopMask & RetMask)
  116. load_condition_mask            CondMask = $78
  117. copy_slot_unmasked             $78 = sum
  118. copy_slot_unmasked             $79 = i
  119. add_float                      $78 += $79
  120. copy_slot_masked               sum = Mask($78)
  121. reenable_loop_mask             LoopMask |= [for-loop continue mask 2]
  122. copy_slot_unmasked             $78 = i
  123. copy_slot_unmasked             $79 = kOne
  124. add_float                      $78 += $79
  125. copy_slot_masked               i = Mask($78)
  126. copy_slot_unmasked             $78 = i
  127. copy_constant                  $79 = 0x41200000 (10.0)
  128. cmplt_float                    $78 = lessThan($78, $79)
  129. merge_loop_mask                LoopMask &= $78
  130. stack_rewind
  131. branch_if_any_active_lanes     branch_if_any_active_lanes -22 (#109)
  132. load_loop_mask                 LoopMask = $77
  133. copy_slot_unmasked             $77 = sum
  134. copy_slot_masked               [break_loop].result = Mask($77)
  135. copy_constant                  $78 = 0x41700000 (15.0)
  136. cmpeq_float                    $77 = equal($77, $78)
  137. copy_slot_masked               $76 = Mask($77)
  138. load_condition_mask            CondMask = $14
  139. zero_slot_unmasked             $21 = 0
  140. merge_condition_mask           CondMask = $75 & $76
  141. branch_if_no_active_lanes      branch_if_no_active_lanes +29 (#170)
  142. zero_slot_unmasked             sum = 0
  143. copy_constant                  i = 0x3DFBE76D (0.123)
  144. store_loop_mask                $22 = LoopMask
  145. jump                           jump +10 (#155)
  146. zero_slot_unmasked             [for-loop continue mask 3] = 0
  147. copy_2_slots_unmasked          $23..24 = sum(0..1)
  148. add_float                      $23 += $24
  149. copy_slot_masked               sum = Mask($23)
  150. reenable_loop_mask             LoopMask |= [for-loop continue mask 3]
  151. copy_slot_unmasked             $23 = i
  152. copy_constant                  $24 = 0x3DE353F8 (0.111)
  153. add_float                      $23 += $24
  154. copy_slot_masked               i = Mask($23)
  155. copy_slot_unmasked             $23 = i
  156. copy_constant                  $24 = 0x3F19999A (0.6)
  157. cmplt_float                    $23 = lessThan($23, $24)
  158. merge_loop_mask                LoopMask &= $23
  159. stack_rewind
  160. branch_if_any_active_lanes     branch_if_any_active_lanes -14 (#146)
  161. load_loop_mask                 LoopMask = $22
  162. copy_slot_unmasked             $22 = sum
  163. copy_constant                  $23 = 0x3FDCCCCD (1.725)
  164. sub_float                      $22 -= $23
  165. copy_slot_masked               [float_loop].result = Mask($22)
  166. abs_float                      $22 = abs($22)
  167. copy_constant                  $23 = 0x3CCCCCCD (0.025)
  168. cmplt_float                    $22 = lessThan($22, $23)
  169. copy_slot_masked               $21 = Mask($22)
  170. load_condition_mask            CondMask = $75
  171. zero_slot_unmasked             $66 = 0
  172. merge_condition_mask           CondMask = $20 & $21
  173. branch_if_no_active_lanes      branch_if_no_active_lanes +32 (#205)
  174. copy_constant                  $67 = 0x41100000 (9.0)
  175. swizzle_4                      $67..70 = ($67..70).xxxx
  176. copy_4_slots_unmasked          result = $67..70
  177. copy_constant                  i = 0x3F800000 (1.0)
  178. store_loop_mask                $67 = LoopMask
  179. jump                           jump +9 (#188)
  180. zero_slot_unmasked             [for-loop continue mask 4] = 0
  181. copy_4_slots_unmasked          $68..71 = result
  182. copy_4_slots_masked            result = Mask($68..71)
  183. reenable_loop_mask             LoopMask |= [for-loop continue mask 4]
  184. copy_slot_unmasked             $68 = i
  185. copy_constant                  $69 = 0x3F800000 (1.0)
  186. add_float                      $68 += $69
  187. copy_slot_masked               i = Mask($68)
  188. copy_slot_unmasked             $68 = i
  189. copy_constant                  $69 = 0x40400000 (3.0)
  190. cmple_float                    $68 = lessThanEqual($68, $69)
  191. merge_loop_mask                LoopMask &= $68
  192. stack_rewind
  193. branch_if_any_active_lanes     branch_if_any_active_lanes -13 (#180)
  194. load_loop_mask                 LoopMask = $67
  195. copy_4_slots_unmasked          $67..70 = result
  196. copy_constant                  $71 = 0x41100000 (9.0)
  197. copy_constant                  $72 = 0x3F800000 (1.0)
  198. copy_constant                  $73 = 0x40000000 (2.0)
  199. copy_constant                  $74 = 0x40400000 (3.0)
  200. cmpeq_4_floats                 $67..70 = equal($67..70, $71..74)
  201. bitwise_and_2_ints             $67..68 &= $69..70
  202. bitwise_and_int                $67 &= $68
  203. copy_slot_masked               [loop_operator_le].result = Mask($67)
  204. copy_slot_masked               $66 = Mask($67)
  205. load_condition_mask            CondMask = $20
  206. zero_slot_unmasked             $82 = 0
  207. merge_condition_mask           CondMask = $65 & $66
  208. branch_if_no_active_lanes      branch_if_no_active_lanes +32 (#240)
  209. copy_constant                  $83 = 0x41100000 (9.0)
  210. swizzle_4                      $83..86 = ($83..86).xxxx
  211. copy_4_slots_unmasked          result = $83..86
  212. copy_constant                  i = 0x3F800000 (1.0)
  213. store_loop_mask                $83 = LoopMask
  214. jump                           jump +9 (#223)
  215. zero_slot_unmasked             [for-loop continue mask 5] = 0
  216. copy_4_slots_unmasked          $84..87 = result
  217. copy_4_slots_masked            result = Mask($84..87)
  218. reenable_loop_mask             LoopMask |= [for-loop continue mask 5]
  219. copy_slot_unmasked             $84 = i
  220. copy_constant                  $85 = 0x3F800000 (1.0)
  221. add_float                      $84 += $85
  222. copy_slot_masked               i = Mask($84)
  223. copy_slot_unmasked             $84 = i
  224. copy_constant                  $85 = 0x40800000 (4.0)
  225. cmplt_float                    $84 = lessThan($84, $85)
  226. merge_loop_mask                LoopMask &= $84
  227. stack_rewind
  228. branch_if_any_active_lanes     branch_if_any_active_lanes -13 (#215)
  229. load_loop_mask                 LoopMask = $83
  230. copy_4_slots_unmasked          $83..86 = result
  231. copy_constant                  $87 = 0x41100000 (9.0)
  232. copy_constant                  $88 = 0x3F800000 (1.0)
  233. copy_constant                  $89 = 0x40000000 (2.0)
  234. copy_constant                  $90 = 0x40400000 (3.0)
  235. cmpeq_4_floats                 $83..86 = equal($83..86, $87..90)
  236. bitwise_and_2_ints             $83..84 &= $85..86
  237. bitwise_and_int                $83 &= $84
  238. copy_slot_masked               [loop_operator_lt].result = Mask($83)
  239. copy_slot_masked               $82 = Mask($83)
  240. load_condition_mask            CondMask = $65
  241. zero_slot_unmasked             $36 = 0
  242. merge_condition_mask           CondMask = $81 & $82
  243. branch_if_no_active_lanes      branch_if_no_active_lanes +32 (#275)
  244. copy_constant                  $37 = 0x41100000 (9.0)
  245. swizzle_4                      $37..40 = ($37..40).xxxx
  246. copy_4_slots_unmasked          result = $37..40
  247. copy_constant                  i = 0x40400000 (3.0)
  248. store_loop_mask                $37 = LoopMask
  249. jump                           jump +9 (#258)
  250. zero_slot_unmasked             [for-loop continue mask 6] = 0
  251. copy_4_slots_unmasked          $38..41 = result
  252. copy_4_slots_masked            result = Mask($38..41)
  253. reenable_loop_mask             LoopMask |= [for-loop continue mask 6]
  254. copy_slot_unmasked             $38 = i
  255. copy_constant                  $39 = 0x3F800000 (1.0)
  256. sub_float                      $38 -= $39
  257. copy_slot_masked               i = Mask($38)
  258. copy_constant                  $38 = 0x3F800000 (1.0)
  259. copy_slot_unmasked             $39 = i
  260. cmple_float                    $38 = lessThanEqual($38, $39)
  261. merge_loop_mask                LoopMask &= $38
  262. stack_rewind
  263. branch_if_any_active_lanes     branch_if_any_active_lanes -13 (#250)
  264. load_loop_mask                 LoopMask = $37
  265. copy_4_slots_unmasked          $37..40 = result
  266. copy_constant                  $41 = 0x41100000 (9.0)
  267. copy_constant                  $42 = 0x40400000 (3.0)
  268. copy_constant                  $43 = 0x40000000 (2.0)
  269. copy_constant                  $44 = 0x3F800000 (1.0)
  270. cmpeq_4_floats                 $37..40 = equal($37..40, $41..44)
  271. bitwise_and_2_ints             $37..38 &= $39..40
  272. bitwise_and_int                $37 &= $38
  273. copy_slot_masked               [loop_operator_ge].result = Mask($37)
  274. copy_slot_masked               $36 = Mask($37)
  275. load_condition_mask            CondMask = $81
  276. zero_slot_unmasked             $56 = 0
  277. merge_condition_mask           CondMask = $35 & $36
  278. branch_if_no_active_lanes      branch_if_no_active_lanes +32 (#310)
  279. copy_constant                  $57 = 0x41100000 (9.0)
  280. swizzle_4                      $57..60 = ($57..60).xxxx
  281. copy_4_slots_unmasked          result = $57..60
  282. copy_constant                  i = 0x40400000 (3.0)
  283. store_loop_mask                $57 = LoopMask
  284. jump                           jump +9 (#293)
  285. zero_slot_unmasked             [for-loop continue mask 7] = 0
  286. copy_4_slots_unmasked          $58..61 = result
  287. copy_4_slots_masked            result = Mask($58..61)
  288. reenable_loop_mask             LoopMask |= [for-loop continue mask 7]
  289. copy_slot_unmasked             $58 = i
  290. copy_constant                  $59 = 0x3F800000 (1.0)
  291. sub_float                      $58 -= $59
  292. copy_slot_masked               i = Mask($58)
  293. zero_slot_unmasked             $58 = 0
  294. copy_slot_unmasked             $59 = i
  295. cmplt_float                    $58 = lessThan($58, $59)
  296. merge_loop_mask                LoopMask &= $58
  297. stack_rewind
  298. branch_if_any_active_lanes     branch_if_any_active_lanes -13 (#285)
  299. load_loop_mask                 LoopMask = $57
  300. copy_4_slots_unmasked          $57..60 = result
  301. copy_constant                  $61 = 0x41100000 (9.0)
  302. copy_constant                  $62 = 0x40400000 (3.0)
  303. copy_constant                  $63 = 0x40000000 (2.0)
  304. copy_constant                  $64 = 0x3F800000 (1.0)
  305. cmpeq_4_floats                 $57..60 = equal($57..60, $61..64)
  306. bitwise_and_2_ints             $57..58 &= $59..60
  307. bitwise_and_int                $57 &= $58
  308. copy_slot_masked               [loop_operator_gt].result = Mask($57)
  309. copy_slot_masked               $56 = Mask($57)
  310. load_condition_mask            CondMask = $35
  311. zero_slot_unmasked             $46 = 0
  312. merge_condition_mask           CondMask = $55 & $56
  313. branch_if_no_active_lanes      branch_if_no_active_lanes +32 (#345)
  314. copy_constant                  $47 = 0x41100000 (9.0)
  315. swizzle_4                      $47..50 = ($47..50).xxxx
  316. copy_4_slots_unmasked          result = $47..50
  317. copy_constant                  i = 0x3F800000 (1.0)
  318. store_loop_mask                $47 = LoopMask
  319. jump                           jump +9 (#328)
  320. zero_slot_unmasked             [for-loop continue mask 8] = 0
  321. copy_4_slots_unmasked          $48..51 = result
  322. copy_4_slots_masked            result = Mask($48..51)
  323. reenable_loop_mask             LoopMask |= [for-loop continue mask 8]
  324. copy_slot_unmasked             $48 = i
  325. copy_constant                  $49 = 0x3F800000 (1.0)
  326. add_float                      $48 += $49
  327. copy_slot_masked               i = Mask($48)
  328. copy_slot_unmasked             $48 = i
  329. copy_constant                  $49 = 0x3F800000 (1.0)
  330. cmpeq_float                    $48 = equal($48, $49)
  331. merge_loop_mask                LoopMask &= $48
  332. stack_rewind
  333. branch_if_any_active_lanes     branch_if_any_active_lanes -13 (#320)
  334. load_loop_mask                 LoopMask = $47
  335. copy_4_slots_unmasked          $47..50 = result
  336. copy_constant                  $51 = 0x41100000 (9.0)
  337. copy_constant                  $52 = 0x41100000 (9.0)
  338. copy_constant                  $53 = 0x41100000 (9.0)
  339. copy_constant                  $54 = 0x3F800000 (1.0)
  340. cmpeq_4_floats                 $47..50 = equal($47..50, $51..54)
  341. bitwise_and_2_ints             $47..48 &= $49..50
  342. bitwise_and_int                $47 &= $48
  343. copy_slot_masked               [loop_operator_eq].result = Mask($47)
  344. copy_slot_masked               $46 = Mask($47)
  345. load_condition_mask            CondMask = $55
  346. zero_slot_unmasked             $26 = 0
  347. merge_condition_mask           CondMask = $45 & $46
  348. branch_if_no_active_lanes      branch_if_no_active_lanes +32 (#380)
  349. copy_constant                  $27 = 0x41100000 (9.0)
  350. swizzle_4                      $27..30 = ($27..30).xxxx
  351. copy_4_slots_unmasked          result = $27..30
  352. copy_constant                  i = 0x3F800000 (1.0)
  353. store_loop_mask                $27 = LoopMask
  354. jump                           jump +9 (#363)
  355. zero_slot_unmasked             [for-loop continue mask 9] = 0
  356. copy_4_slots_unmasked          $28..31 = result
  357. copy_4_slots_masked            result = Mask($28..31)
  358. reenable_loop_mask             LoopMask |= [for-loop continue mask 9]
  359. copy_slot_unmasked             $28 = i
  360. copy_constant                  $29 = 0x3F800000 (1.0)
  361. add_float                      $28 += $29
  362. copy_slot_masked               i = Mask($28)
  363. copy_slot_unmasked             $28 = i
  364. copy_constant                  $29 = 0x40800000 (4.0)
  365. cmpne_float                    $28 = notEqual($28, $29)
  366. merge_loop_mask                LoopMask &= $28
  367. stack_rewind
  368. branch_if_any_active_lanes     branch_if_any_active_lanes -13 (#355)
  369. load_loop_mask                 LoopMask = $27
  370. copy_4_slots_unmasked          $27..30 = result
  371. copy_constant                  $31 = 0x41100000 (9.0)
  372. copy_constant                  $32 = 0x3F800000 (1.0)
  373. copy_constant                  $33 = 0x40000000 (2.0)
  374. copy_constant                  $34 = 0x40400000 (3.0)
  375. cmpeq_4_floats                 $27..30 = equal($27..30, $31..34)
  376. bitwise_and_2_ints             $27..28 &= $29..30
  377. bitwise_and_int                $27 &= $28
  378. copy_slot_masked               [loop_operator_ne].result = Mask($27)
  379. copy_slot_masked               $26 = Mask($27)
  380. load_condition_mask            CondMask = $45
  381. copy_4_constants               $6..9 = colorRed
  382. merge_condition_mask           CondMask = $25 & $26
  383. copy_4_constants               $10..13 = colorGreen
  384. copy_4_slots_masked            $6..9 = Mask($10..13)
  385. load_condition_mask            CondMask = $25
  386. copy_4_slots_masked            [main].result = Mask($6..9)
  387. load_src                       src.rgba = [main].result
